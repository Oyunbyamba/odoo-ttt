<odoo>
  <data>
    <template id="assets_backend" name="xls_assets" inherit_id="web.assets_backend">
        <xpath expr="." position="inside">
          <script type="text/javascript" src="/ubisol_hr_attendance_report/static/src/js/action_manager.js"/>
          <script type="text/javascript" src="/ubisol_hr_attendance_report/static/src/js/attendance_report_table.js"/>
        </xpath>
    </template>
    <!-- explicit list view definition -->

    <record id="hr_attendance_report_form" model="ir.ui.view">
      <field name="name">Ирцийн график</field>
      <field name="model">attendance.report.interval</field>
      <field name="arch" type="xml">
        <form string="Ирцийн график" create="false" edit="false" js_class="hr_attendance_report_form">
          <sheet>
            <group>
              <group>
                <field name="start_date"/>
                <field name="end_date"/>
              </group>
              <group>
                <field name="calculate_type"/>
                <field name="department_id" attrs="{'invisible':[('calculate_type', '!=', 'department')]}"/>
                <field name="employee_id" attrs="{'invisible':[('calculate_type', '!=', 'employee')]}"/>
              </group>
            </group>
            <group>
              <group>
                <div>
                  <button id="attendance_report_interval"  name="attendance_report_interval" string="Хайх" type="object" class="oe_highlight"/>
                  <button id="attendance_report_download"  name="attendance_report_download" string="Татах" type="object" class="oe_highlight"/>
                </div>
              </group>
            </group>
            <group>
              <div class="attendance_report"></div>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="hr_attendance_report_view_filter" model="ir.ui.view">
      <field name="name">hr_attendance_report_filter</field>
      <field name="model">hr.attendance.report</field>
      <field name="arch" type="xml">
        <search string="Ирцийн график хайлт">
          <field name="hr_employee"/>
          <field name="hr_department" operator="child_of"/>
          <separator/>
          <filter string="Амралтын өдөр харуулахгүй" name="is_rest" domain="[('day_period_int', '!=', 3)]"/>
          <separator/>
          <filter string="Илүү цагтай" name="informalovertime" domain="[('informal_overtime', '>', 0.0)]" />
          <separator/>
          <filter string="Баталсан илүү цагтай" name="overtime" domain="[('overtime', '>', 0.0)]" />
          <separator/>
          <filter string="Гарахдаа дараагүй" name="nocheckout" domain="[('check_out', '=', False)]" />
          <filter string="Орохдоо дараагүй" name="nocheckin" domain="[('check_in', '=', False)]" />
          <group expand="0" string="Group By">
            <filter string="Хэлтэлсээр бүлэглэх" name="department" context="{'group_by': 'hr_department'}"/>
            <filter string="Ажилтнаар бүлэглэх" name="employee" context="{'group_by': 'hr_employee'}"/>
            <separator/>
            <filter string="Ажиллах хуваариар бүлэглэх" name="groupby_name" context="{'group_by': 'hr_employee_shift'}"/>
          </group>
        </search>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record id="ubisol_hr_attendance_report_action" model="ir.actions.act_window">
      <field name="name">Ирцийн график</field>
      <field name="res_model">attendance.report.interval</field>
      <field name="view_mode">form</field>
    </record>

    <record model="ir.actions.server" id="action_update_attendance_report">
      <field name="name">Ирцийн график шинэчлэх</field>
      <field name="model_id" ref="model_hr_attendance_report"/>
      <field name="type">ir.actions.server</field>
      <field name="state">code</field>
      <field name="code">model.calculate_report()</field>
    </record>

    <menuitem
      id="menu_ubisol_hr_attendance_report"
      name="Ирцийн график"
      action="ubisol_hr_attendance_report_action"
      parent="hr_attendance.menu_hr_attendance_report"
      groups="hr_attendance.group_hr_attendance"
      sequence="15"
    />
    <!-- <menuitem
      id="menu_update_ubisol_hr_attendance_report"
      name="Update Attendance Report"
      action="action_update_attendance_report"
      parent="menu_hr_attendance_report_root"
      groups="hr_attendance.group_hr_attendance"
      sequence="25"
    /> -->

  </data>
</odoo>