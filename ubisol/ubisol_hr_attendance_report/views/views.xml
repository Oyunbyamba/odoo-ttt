<odoo>
  <data>
    <!-- explicit list view definition -->
    <record id="hr_attendance_report_view_pivot" model="ir.ui.view">
      <field name="model">hr.attendance.report</field>
      <field name="arch" type="xml">
        <pivot disable_linking="1">
          <field name="hr_department" type="row"/>
          <field name="hr_employee" type="row"/>
          <field name="work_day" type="col" interval="month"/>
          <field name="work_day" type="col" interval="day"/>
          <field name="work_hours" string="Ажиллавал зохих цаг" type="measure" widget="float_time"/>
          <field name="worked_hours" string="Ажилласан цаг" type="measure" widget="float_time"/>
          <field name="difference_check_in" string="Хоцролт" type="measure" widget="float_time"/>
          <field name="difference_check_out" string="Таслалт" type="measure" widget="float_time"/>
          <field name="overtime" string="Баталсан илүү цаг" type="measure" widget="float_time"/>
          <field name="informal_overtime" string="Илүү цаг" type="measure" widget="float_time"/>
          <field name="outside_work" string="Гадуур ажил" type="measure" widget="float_time"/>
        </pivot>
      </field>
    </record>

    <record id="hr_attendance_report_view_tree" model="ir.ui.view">
      <field name="name">hr.attendance.report.tree</field>
      <field name="model">hr.attendance.report</field>
      <field name="arch" type="xml">
        <tree create="false" delete="false" string="Ирцийн график">
          <field name="hr_employee" string="Ажилтан"/>
          <field name="work_day" string="Өдөр"/>
          <field name="start_work_time" string="Ажил эхлэх" widget="float_time"/>
          <field name="end_work_time" string="Ажил дуусах" widget="float_time"/>
          <field name="check_in_time" string="Орсон"/>
          <field name="check_out_time" string="Гарсан"/>
          <field name="work_hours" string="Ажиллавал зохих цаг" widget="float_time"/>
          <field name="worked_hours" string="Ажилласан цаг" widget="float_time"/>
          <field name="difference_check_in" string="Хоцролт" widget="float_time"/>
          <field name="difference_check_out" string="Таслалт" widget="float_time"/>
          <field name="overtime" string="Баталсан илүү цаг" widget="float_time"/>
          <field name="informal_overtime" string="Илүү цаг" widget="float_time"/>
          <field name="outside_work" string="Гадуур ажил" widget="float_time"/>
        </tree>
      </field>
    </record>

    <record id="hr_attendance_report_view_filter" model="ir.ui.view">
      <field name="name">hr_attendance_report_filter</field>
      <field name="model">hr.attendance.report</field>
      <field name="arch" type="xml">
        <search string="Ирцийн график хайлт">
          <field name="hr_employee"/>
          <field name="hr_department" operator="child_of"/>
          <separator/>
          <filter string="Амралтын өдөр харуулахгүй" name="is_rest" domain="[('day_period_int', '!=', 3)]"/>
          <separator/>
          <filter string="Илүү цагтай" name="informalovertime" domain="[('informal_overtime', '>', 0.0)]" />
          <separator/>
          <filter string="Баталсан илүү цагтай" name="overtime" domain="[('overtime', '>', 0.0)]" />
          <separator/>
          <filter string="Гарахдаа дараагүй" name="nocheckout" domain="[('check_out', '=', False)]" />
          <filter string="Орохдоо дараагүй" name="nocheckin" domain="[('check_in', '=', False)]" />
          <group expand="0" string="Group By">
            <filter string="Хэлтэлсээр бүлэглэх" name="department" context="{'group_by': 'hr_department'}"/>
            <filter string="Ажилтнаар бүлэглэх" name="employee" context="{'group_by': 'hr_employee'}"/>
            <separator/>
            <filter string="Ажиллах хуваариар бүлэглэх" name="groupby_name" context="{'group_by': 'hr_employee_shift'}"/>
          </group>
        </search>
      </field>
    </record>

    <!-- actions opening views on models -->
    <record id="ubisol_hr_attendance_report_action" model="ir.actions.act_window">
      <field name="name">Ирцийн график</field>
      <field name="res_model">hr.attendance.report</field>
      <field name="context" >
        {'search_default_current_month': 1, 'search_default_is_rest': 1, 'search_default_my': 1, "search_default_employee": 1, "search_default_department": 1}
      </field>
      <field name="view_mode">tree,pivot</field>
    </record>

    <record model="ir.actions.server" id="action_update_attendance_report">
      <field name="name">Ирцийн график шинэчлэх</field>
      <field name="model_id" ref="model_hr_attendance_report"/>
      <field name="type">ir.actions.server</field>
      <field name="state">code</field>
      <field name="code">model.calculate_report()</field>
    </record>

    <menuitem
      id="menu_ubisol_hr_attendance_report"
      name="Ирцийн график"
      action="ubisol_hr_attendance_report_action"
      parent="hr_attendance.menu_hr_attendance_report"
      groups="hr_attendance.group_hr_attendance"
      sequence="15"
    />
    <!-- <menuitem
      id="menu_update_ubisol_hr_attendance_report"
      name="Update Attendance Report"
      action="action_update_attendance_report"
      parent="menu_hr_attendance_report_root"
      groups="hr_attendance.group_hr_attendance"
      sequence="25"
    /> -->

  </data>
</odoo>